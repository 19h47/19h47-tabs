<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Tabs</title>
		<link rel="icon" type="image/png" href="open-file-folder.png" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
			integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
			crossorigin="anonymous"
		/>
		<style>
			.tab-content > .is-active {
				display: block;
			}

			.tab-content section {
				animation: fadeEffect 1s;
			}

			@keyframes fadeEffect {
				from {
					opacity: 0;
				}
				to {
					opacity: 1;
				}
			}

			.nav-tabs .nav-link.is-active {
				color: #495057;
				background-color: #fff;
				border-color: #dee2e6 #dee2e6 #fff;
			}

			.nav-tabs .nav-link {
				color: #007bff;
				text-decoration: none;
				background-color: transparent;
			}

			.Alert {
				margin: 1em;
				position: fixed;
				top: 0;
				right: 0;
				z-index: 10;
			}
		</style>
	</head>
	<body>
		<div class="Alert js-alert"></div>

		<div class="container">
			<div class="row my-5">
				<div class="col-12">
					<h1 class="m-0">
						<a href="https://github.com/19h47/19h47-tabs"> Tabs </a>
					</h1>
				</div>
			</div>
			<div class="row my-5">
				<div class="col-12">
					<div class="border p-3">
						<h3 class="mb-3">
							Selection doesn't automatically follow focus and hash option is disabled
						</h3>
						<code> { delay: false, hash: false } </code>
						<div class="js-tabs mt-3" data-hash="false">
							<div class="border p-3 my-3">
								<button class="btn btn-primary js-destroy mr-2" type="button">
									Destroy
								</button>
								<button class="btn btn-primary js-create" type="button">
									Create
								</button>
							</div>
							<ul class="nav nav-tabs my-3" role="tablist">
								<li class="nav-item">
									<button
										type="button"
										class="nav-link is-active"
										role="tab"
										aria-selected="true"
										aria-controls="home-tab"
										id="home"
									>
										Home
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="project-tab"
										id="project"
										tabindex="-1"
									>
										Project
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="contact-tab"
										id="contact"
										tabindex="-1"
										data-deletable="true"
									>
										Deletable!
									</button>
								</li>
							</ul>

							<div class="tab-content">
								<section
									class="m-3 is-active"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="home"
									id="home-tab"
								>
									<p>
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Nihil hic, vero. Fugiat voluptas ex consequatur hic nemo
										officia iure placeat non, pariatur, dolore natus nobis,
										tempore dolores dicta nisi inventore.
									</p>
									<p>
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Esse animi illo voluptate possimus quidem quo ut culpa ullam
										molestias, mollitia eaque commodi eos. Illum ea dignissimos
										recusandae suscipit nulla veniam.
									</p>
									<p class="mb-0">
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Deleniti sed, consequuntur repellendus architecto, harum
										cumque velit, eius debitis ea voluptatibus officiis. Eaque
										quas modi nisi optio quasi, neque mollitia quo.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="project"
									id="project-tab"
									hidden
								>
									<p class="mb-0">
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Itaque cum ad officia reiciendis assumenda earum officiis
										praesentium rem. A, voluptates itaque eligendi quae odit
										sunt voluptatibus consequuntur soluta distinctio assumenda.
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Temporibus veniam in velit modi animi quod est, voluptatem
										voluptatum fugiat. Harum architecto, quae repellendus nobis,
										libero vel corporis quibusdam! Enim, numquam.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="contact"
									id="contact-tab"
									hidden
								>
									<p>
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Sequi id doloribus soluta minima nulla nemo rerum, eveniet
										dolorem earum! Similique atque, aliquam esse dolores alias
										minima voluptas mollitia quos nisi.
									</p>
									<p class="mb-0">
										Lorem ipsum dolor sit amet, consectetur adipisicing elit.
										Ex, quia, sunt. Laudantium possimus vel ex nam fugit est
										eligendi sapiente repellat ab a. Neque saepe magni
										laudantium dolorem, obcaecati earum.
									</p>
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row my-5">
				<div class="col-12">
					<div class="border p-3">
						<h3 class="mb-3">
							Selection automatically follow focus (thanks to delay option) and hash
							option is enabled
						</h3>
						<code> { delay: 300, hash: true } </code>
						<div class="js-tabs mt-3" data-delay="300" data-hash="true">
							<div class="border p-3 my-3">
								<button class="btn btn-primary js-destroy mr-2" type="button">
									Destroy
								</button>
								<button class="btn btn-primary js-create" type="button">
									Create
								</button>
							</div>
							<ul class="nav nav-tabs my-3" role="tablist">
								<li class="nav-item">
									<button
										type="button"
										class="nav-link is-active"
										role="tab"
										aria-selected="true"
										aria-controls="ant-giant-tab"
										id="ant"
									>
										Ant, giant
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="ettercap-tab"
										id="ettercap"
										tabindex="-1"
									>
										Ettercap
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="cloaker-tab"
										id="cloaker"
										tabindex="-1"
									>
										Cloaker
									</button>
								</li>
							</ul>

							<div class="tab-content">
								<section
									class="m-3 is-active"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="ant-giant"
									id="ant-giant-tab"
								>
									<p class="mb-0">
										Both worker and warrior ants fight. If a warrior manages to
										bite, it also tries to sting for 3d4 points damage. A
										successful save reduces damage to 1d4. The queen has 10 HD
										but does not move or fight.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="ettercap"
									id="ettercap-tab"
									hidden
								>
									<p>
										Ettercaps are ugly bipedal creatures that get along very
										well with all types of giant spiders. These creatures of low
										intelligence are exceedingly cruel, very cunning, and are
										skilled in setting traps -- very deadly traps -- much like
										the spiders that often live around them.
									</p>
									<p>
										Ettercaps stand around six feet tall, even with their
										stooping gait and hunched shoulders. The creatures have
										short, spindly legs, long arms that reach nearly to their
										ankles, and large pot-bellies. The hands of ettercaps have a
										thumb and three long fingers that end in razor sharp claws.
										Their bodies are covered by tufts of thick, wiry, black
										hair, and their skin is dark and thick. Ettercaps' heads are
										almost equine in shape, but they have large reptilian eyes,
										usually blood-red in color, and large fangs, one protruding
										downward from each side of the mouth. The mouth itself is
										large and lined with very sharp teeth.
									</p>
									<p class="mb-0">
										Ettercaps do not have a formal language. They express
										themselves through a combination of highpitched chittering
										noises, shrieks, and violent actions.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="cloaker"
									id="cloaker-tab"
									hidden
								>
									<p>
										Cloakers are fiendish horrors, related to trappers, that
										dwell in dark places far beneath the surface of the earth.
										They generally seek to kill those who enter their lairs,
										unless they can think up some other, more amusing way to
										punish interlopers.
									</p>
									<p>
										When a cloaker is first seen, it is almost impossible to
										distinguish this monster from a common black cloak. The
										monster's back has two rows of black eye spots running down
										it that look much like buttons, and the two ivory-colored
										claws on its upper edge can easily be mistaken for bone
										clasps.
									</p>
									<p class="mb-0">
										When it unfurls itself and moves to attack, however, its
										true nature becomes all too obvious. At this point, its
										white underside is clear and the monster's face is fully
										visible. This face, with the glow of its two piercing, red
										eyes and the needle-like fangs that line its mouth, is a
										truly horrible sight. At this point, the monster also
										uncurls the whip-like tail at its trailing edge and begins
										to swish it back and forth in anticipation.
									</p>
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row my-5">
				<div class="col-12">
					<div class="border p-3">
						<h3 class="mb-3">Add</h3>
						<div class="js-tabs mt-3">
							<div class="border my-3 p-3">
								<div class="form-group">
									<input
										class="form-control js-input"
										type="text"
										placeholder="Item"
									/>
								</div>
								<div class="form-group">
									<textarea
										placeholder="Content"
										class="form-control js-textarea"
									></textarea>
								</div>

								<button class="btn btn-primary js-add mr-2" type="button">
									Add
								</button>

								<button class="btn btn-primary js-destroy mr-2" type="button">
									Destroy
								</button>

								<button class="btn btn-primary js-create" type="button">
									Create
								</button>
							</div>

							<ul class="nav nav-tabs my-3 js-tab-list" role="tablist">
								<li class="nav-item">
									<button
										type="button"
										class="nav-link is-active"
										role="tab"
										aria-selected="true"
										aria-controls="galeb-duhr-tab"
										id="galeb-duhr"
									>
										Galeb Duhr
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="troll-tab"
										id="troll"
										tabindex="-1"
									>
										Troll
									</button>
								</li>
								<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="jermlaine-tab"
										id="jermlaine"
										tabindex="-1"
									>
										Jermlaine
									</button>
								</li>
							</ul>

							<div class="tab-content js-tab-content">
								<section
									class="m-3 is-active"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="galeb-duhr"
									id="galeb-duhr-tab"
								>
									<p>
										The galeb duhr is a curious boulder-like creature with
										appendages that act as hands and feet. These intelligent
										beings are very large and slow-moving. They live in rocky or
										mountainous areas where they can feel the earth power and
										control the rocks around them.
									</p>
									<p class="mb-0">
										A typical galeb duhr is from 8 to 12 feet tall. When not
										moving it looks like part of the terrain it lives in.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="troll"
									id="troll-tab"
									hidden
								>
									<p class="mb-0">
										Trolls are horrid carnivores found in all climes, from
										arctic wastelands to tropical jungles. Most creatures avoid
										these beasts, since trolls know no fear and attack
										unceasingly when hungry. Their frame appears thin and frail,
										but trolls possess surprising strength. Their arms and legs
										are long and ungainly. The legs end in great three-toed
										feet, the arms in wide, powerful hands with sharpened claws.
										The trolls' rubbery hide is colored a moss green, mottled
										green and gray, or putrid gray. A writhing hairlike mass
										grows out of their skulls and is usually greenish black or
										iron gray in color. Their dull, sunken black eyes possess
										90-foot infravision. Females are easily distinguished from
										males; they are both larger and more powerful than their
										male counterparts.
									</p>
								</section>
								<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="jermlaine"
									id="jermlaine-tab"
									hidden
								>
									<p>
										Jermlaine are a diminutive humanoid race that dwells in
										tunnels and ambushes hapless adventurers. They are known by
										a variety of names such as jinxkin or bane-midges.
									</p>
									<p class="mb-0">
										Jermlaine appear to be tiny humans dressed in baggy clothing
										and leather helmets. In fact the "clothing" is their own
										saggy skin and pointed heads. The limbs are knottily
										muscled. The fingernails and toenails are thick and filthy,
										although the fingers and toes are very nimble. Their
										gray-brown, warty hide blends in with natural earth and
										stone. When they wear rags or scraps as clothing, such items
										are also camouflage colored.
									</p>
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script src="main.js"></script>
		<script>
			const elements = [...document.querySelectorAll('.js-tabs')];
			const alert = content => {
				const div = document.createElement('div');

				div.className = 'toast fade show';
				div.style = 'toast fade show';
				div.innerHTML = `<div class="toast-body">${content}</div>`;

				div.setAttribute('role', 'alert');
				div.setAttribute('aria-live', 'assertive');
				div.setAttribute('aria-atomic', 'true');

				return div;
			};
			const $alert = document.querySelector('.js-alert');

			const onChange = content => {
				const $el = alert(content);

				$alert.appendChild($el);

				$el.addEventListener(
					'click',
					() => $el.style.setProperty('display', 'none'),
					false,
				);

				setTimeout(() => $el.parentNode.removeChild($el), 2000);
			};

			elements.map($el => {
				const delay = parseInt($el.getAttribute('data-delay'), 10) || false;
				const hash = JSON.parse($el.getAttribute('data-hash'));
				const tabs = new Tabs.default($el, {
					delay,
					hash,
					callback() {
						onChange(`<strong>${this.controls}</strong> callback!`);
					},
				});
				const $destroy = $el.querySelector('.js-destroy');
				const $create = $el.querySelector('.js-create');

				const $list = $el.querySelector('.js-tab-list');
				const $content = $el.querySelector('.js-tab-content');
				const $add = $el.querySelector('.js-add');
				const $input = $el.querySelector('.js-input');
				const $textarea = $el.querySelector('.js-textarea');

				tabs.init();

				$destroy && $destroy.addEventListener('click', () => tabs.destroy());
				$create && $create.addEventListener('click', () => tabs.create());

				tabs.tabs.forEach(tab => {
					tab.on('Tab.activate', ({ controls }) => {
						onChange(`<strong>${controls}</strong> has been activated!`);
					});
					tab.on('Tab.delete', ({ controls }) => {
						onChange(`<strong>${controls}</strong> has been deleted!`);
					});
				});

				$add &&
					$add.addEventListener('click', () => {
						const { value: tab } = $input;
						const { value: panel } = $textarea;

						console.log('tetete');

						if (tab && panel) {
							console.log(tab, panel);

							tabs.destroy();

							$list.insertAdjacentHTML(
								'beforeend',
								`<li class="nav-item">
									<button
										type="button"
										class="nav-link"
										role="tab"
										aria-selected="false"
										aria-controls="${tab}-tab"
										id="${tab}"
										tabindex="-1"
									>
										${tab}
									</button>
								</li>`,
							);

							$content.insertAdjacentHTML(
								'beforeend',
								`<section
									class="m-3"
									tabindex="0"
									role="tabpanel"
									aria-labelledby="${tab}"
									id="${tab}-tab"
									hidden
								>
									<p class="mb-0">${panel}</p>
								</section>`,
							);

							tabs.create();
							console.log(tabs);

							tabs.tabs.forEach(tab => {
								tab.on('Tab.activate', ({ controls }) => {
									onChange(`<strong>${controls}</strong> has been activated!`);
								});
							});
						}
					});
			});
		</script>
	</body>
</html>
